# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "invoices.map is not a function"

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
invoices.map is not a function
```

## –ü—Ä–∏—á–∏–Ω–∞

API `/invoices` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ `items` –∏ `pagination`, –Ω–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–ª –º–∞—Å—Å–∏–≤ –Ω–∞–ø—Ä—è–º—É—é.

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
// API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { items: [...], pagination: {...} }
// –ù–æ –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª: data || []
const invoices = data || []; // data - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –Ω–µ –º–∞—Å—Å–∏–≤!
```

## –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω —Ö—É–∫ `useInvoices`

–¢–µ–ø–µ—Ä—å —Ö—É–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å `items` –∏ `pagination`:

```typescript
interface InvoicesResponse {
  items: Invoice[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `Invoices.tsx`

```typescript
const invoices = data?.items || [];
const totalPages = data?.pagination?.totalPages || 1;
const totalItems = data?.pagination?.total || invoices.length;
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `Suppliers.tsx` –∏ `PaymentModal.tsx`

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `Array.isArray()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `frontend/src/hooks/useInvoices.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `frontend/src/pages/Invoices.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `data.items`
- ‚úÖ `frontend/src/pages/Suppliers.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–∞
- ‚úÖ `frontend/src/components/PaymentModal.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:

1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
3. –ù–∞–∫–ª–∞–¥–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞** (Ctrl+Shift+Delete)
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   cd frontend
   npm run dev
   ```
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API:**
   ```bash
   curl http://localhost:5000/api/invoices
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ `items` –∏ `pagination`

---

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:** –í—Å–µ —Ñ–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `invoices.map`, —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö API.

